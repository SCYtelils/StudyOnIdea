package com.langsin.exer;

/**
 * å–ç¥¨é—®é¢˜ï¼Œå¤šçº¿ç¨‹åˆ©ç”¨runnableæ¥å£å®ç°
 * çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š
 *  1.æœ‰å‡ ç‡å‡ºç°é”™ç¥¨å’Œé‡ç¥¨
 * åŸå› ï¼šåœ¨çº¿ç¨‹è¢«é˜»å¡æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿåœ¨ä½¿ç”¨å…±äº«æ•°æ®ï¼Œå› æ­¤å‡ºç°é”™ç¥¨é‡ç¥¨é—®é¢˜
 *
 * æ–¹æ³•ä¸€ï¼šåŒæ­¥ä»£ç å—ï¼š
 *      çº¿ç¨‹åŒæ­¥æœºåˆ¶ï¼š
 *      å½“æŸä¸€ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨å…±ç”¨çš„æ•°æ®ï¼ˆæ‰§è¡Œè¢«åŒæ­¥çš„ä»£ç ï¼‰æ—¶ï¼Œå…¶ä»–çº¿ç¨‹è¦è¿›è¡Œç­‰å€™ï¼Œæ— è®ºè¿™ä¸ªçº¿ç¨‹æ˜¯å¦å¤„äºé˜»å¡çŠ¶æ€ã€‚
 *      ä¸¾ä¾‹ï¼šå…¬å…±å•æ‰€
 *      synchronized(åŒæ­¥ç›‘è§†å™¨ï¼ˆé”ï¼‰){
 *          //è¦è¢«åŒæ­¥çš„ä»£ç 
 *      }
 *
 *      è¯´æ˜ï¼š
 *             1.æ“ä½œ å…±äº«æ•°æ®çš„ä»£ç å³ä¸ºè¦è¢«åŒæ­¥çš„ä»£ç 
 *            2.å…±äº«æ•°æ®ï¼šå¤šä¸ªçº¿ç¨‹è¦å…±åŒæ“ä½œçš„åŒä¸€ä¸ªæ•°æ®ï¼Œä¾‹å¦‚ï¼šticket
 *           3.åŒæ­¥ç›‘è§†å™¨ï¼Œä¿—ç§°é”ï¼Œä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡éƒ½å¯æ‹…ä»»
 *           è¦æ±‚ï¼šå¤šä¸ªçº¿ç¨‹å¿…é¡»å…±ç”¨åŒä¸€æŠŠé”
 *
 *      åŒæ­¥çš„æ–¹å¼ï¼Œè§£å†³äº†çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ --å¥½å¤„
 *      æ“ä½œä»£ç æ—¶ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å‚ä¸ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚ç›¸å½“äºä¸€ä¸ªå•çº¿ç¨‹è¿‡ç¨‹ï¼Œæ•ˆç‡ä½
 * @author ğŸ¹â˜‚à¿ˆç§‹é¹œà¿ˆğŸ¹ï¸
 * @create 2020/3/5 18:18
 */

class Windows implements Runnable{

    //è¿™é‡Œæ— éœ€è®¾å®šé™æ€å˜é‡ï¼Œå› ä¸ºå¤šä¸ªçº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªæ¥å£
    public int ticket = 100;
    Object object = new Object();

    @Override
    public void run() {
        while (true){
            //çº¿ç¨‹åŒæ­¥æœºåˆ¶
//            æ–¹å¼ä¸€ï¼šsynchronized(object){
            //æ–¹å¼äºŒï¼šç”¨thisåŠ¨æ€æŒ‡ä»£ï¼Œåªåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·æŒ‡ä»£
//            synchronized (this){
            //æ–¹æ³•ä¸‰ï¼šç”¨ç±»çš„å¯¹è±¡
            synchronized (Windows.class){
                if (ticket>0){

                    //è¿›è¡Œçº¿ç¨‹ä¼‘çœ åä¼šé‡åˆ°è´Ÿæ•°ç¥¨çš„é—®é¢˜ï¼Œå¹¶ä¸”æ›´å®¹æ˜“å‡ºç°ç¥¨é‡å¤çš„é—®é¢˜
                    //é˜»å¡åä¼šæå‡çº¿ç¨‹åˆ‡æ¢çš„æ¦‚ç‡
                    try {
                        Thread.sleep(100);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }

                    System.out.println(TicketTread.currentThread().getName() + ":æ­£åœ¨å”®å–ç¬¬" + ticket + "å¼ ç¥¨");
                    ticket--;
                }else {
                    break;
                }
            }
        }

    }
}


public class TicketDemo1 {
    public static void main(String[] args) {
        Windows windows = new Windows();
        Thread t1 = new Thread(windows);
        Thread t2 = new Thread(windows);
        Thread t3 = new Thread(windows);

        t1.setName("çª—å£ä¸€");
        t2.setName("çª—å£äºŒ");
        t3.setName("çª—å£ä¸‰");

        t1.start();
        t2.start();
        t3.start();
    }
}
